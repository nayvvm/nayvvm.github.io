<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relatório - Laboratório 4: Equalização de Histograma</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            background-color: #f4f4f4;
            color: #333;
            margin: 0;
            padding: 0;
        }
        .container {
            width: 80%;
            margin: 20px auto;
            background: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }
        header {
            text-align: center;
            border-bottom: 2px solid #0056b3;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        header h1 {
            color: #0056b3;
            margin: 0;
        }
        header p {
            font-size: 1.1em;
            color: #555;
        }
        section {
            margin-bottom: 30px;
        }
        h2 {
            color: #0056b3;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
        }
        h3 {
            color: #333;
        }
        img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 15px auto;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        code {
            background-color: #eee;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: Consolas, "Courier New", monospace;
        }
        ul {
            padding-left: 20px;
        }
        li {
            margin-bottom: 10px;
        }
        footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            font-style: italic;
            color: #777;
        }
        .image-gallery {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
        }
        .image-gallery div {
            flex-basis: 48%;
            margin-bottom: 15px;
            text-align: center;
        }
        .image-gallery img {
            max-width: 95%;
        }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>Relatório de Laboratório</h1>
            <p>Processamento de Imagem: Equalização de Histograma e Binarização</p>
        </header>

        <main>
            <section id="introducao">
                <h2>1. Introdução</h2>
                <p>Este relatório detalha os experimentos realizados na aula de laboratório com foco em técnicas de realce de contraste em processamento de imagens. O objetivo principal foi estudar, implementar e analisar o método de Equalização de Histograma, uma técnica fundamental para melhorar a visibilidade de detalhes em imagens com baixo contraste.</p>
                <p>Os experimentos foram conduzidos utilizando a biblioteca de visão computacional OpenCV em C++, abordando desde a aplicação em imagens estáticas até o processamento em tempo real de vídeo (webcam), binarização e aplicação em imagens coloridas.</p>
            </section>

            <section id="fundamentos">
                <h2>2. Fundamentos Básicos</h2>
                <p>O processamento de imagens digitais envolve algoritmos que manipulam pixels para extrair informações ou melhorar a qualidade visual. Os conceitos-chave deste laboratório são:</p>
                <ul>
                    <li><strong>Histograma de Imagem:</strong> Uma representação gráfica da distribuição das intensidades (níveis de cinza ou cores) dos pixels em uma imagem. Ele quantifica a frequência de cada nível de intensidade.</li>
                    <li><strong>Equalização de Histograma:</strong> Uma técnica de ajuste de contraste que visa redistribuir as intensidades dos pixels de forma a obter um histograma o mais uniforme possível (plano). Isso "espalha" os valores de pixels mais frequentes, resultando em um aumento do contraste global e na revelação de detalhes em regiões subexpostas ou superexpostas.</li>
                    <li><strong>Limiarização (Binarização):</strong> Um processo que converte uma imagem em tons de cinza para uma imagem binária (preto e branco). Um valor de limiar é definido; pixels com intensidade acima do limiar tornam-se brancos (255) e pixels abaixo tornam-se pretos (0).</li>
                    <li><strong>OpenCV (Open Source Computer Vision Library):</strong> Uma biblioteca de código aberto com vasta funcionalidade para visão computacional e processamento de imagem em tempo real, utilizada como ferramenta principal neste trabalho.</li>
                </ul>
            </section>

            <section id="materiais-metodos">
                <h2>3. Materiais e Métodos</h2>
                
                <h3>Ambiente dos Experimentos</h3>
                <p>Os experimentos foram desenvolvidos no seguinte ambiente:</p>
                <ul>
                    <li><strong>Sistema Operacional:</strong> Ubuntu 22.04</li>
                    <li><strong>IDE:</strong> Visual Studio Code</li>
                    <li><strong>Biblioteca:</strong> OpenCV (Versão 4.x)</li>
                    <li><strong>Linguagem:</strong> C++</li>
                </ul>

                <h3>Procedimentos Experimentais e Diagramas de Blocos</h3>
                <p>Os quatro roteiros de experimentos foram implementados da seguinte forma:</p>

                <h4>3.1. Experimento 1: Equalização em Imagem Estática</h4>
                <p>Implementado pelo script <code>b.1_Imagem_Estática.cpp</code>.</p>
                <ul>
                    <li><strong>Fluxo:</strong>
                        <ol>
                            <li>Ler imagem estática (Ex: `george.png`).</li>
                            <li>Converter para tons de cinza.</li>
                            <li>Calcular histograma da imagem em cinza.</li>
                            <li>Aplicar equalização de histograma (<code>cv::equalizeHist</code>).</li>
                            <li>Calcular histograma da imagem equalizada.</li>
                            <li>Exibir e salvar resultados (imagem cinza, imagem equalizada, histograma antes, histograma depois).</li>
                        </ol>
                    </li>
                </ul>
                
                <h4>3.2. Experimento 2: Equalização em Tempo Real (Webcam)</h4>
                <p>Implementado pelo script <code>b.2_Leitura_da_Webcam_ao_Vivo.cpp</code>.</p>
                <ul>
                    <li><strong>Fluxo (em loop):</strong>
                        <ol>
                            <li>Capturar quadro (frame) da webcam.</li>
                            <li>Converter quadro para tons de cinza.</li>
                            <li>Aplicar equalização de histograma ao quadro em cinza.</li>
                            <li>Exibir o quadro em cinza e o quadro equalizado lado a lado.</li>
                        </ol>
                    </li>
                </ul>

                <h4>3.3. Experimento 3: Estudo da Binarização (com/sem EQ)</h4>
                <p>Implementado pelo script <code>b.3_Adicionando_Limiarização.cpp</code>.</p>
                <ul>
                    <li><strong>Fluxo (em loop):</strong>
                        <ol>
                            <li>Capturar quadro da webcam.</li>
                            <li>Converter para tons de cinza.</li>
                            <li>Aplicar equalização de histograma (gerando Imagem EQ).</li>
                            <li>Aplicar limiarização (<code>cv::threshold</code>) na Imagem em Cinza (Binária Sem EQ).</li>
                            <li>Aplicar limiarização (<code>cv::threshold</code>) na Imagem EQ (Binária Com EQ).</li>
                            <li>Exibir resultados para comparação.</li>
                        </ol>
                    </li>
                </ul>

                <h4>3.4. Experimento 4: Estudo da Equalização em Cores</h4>
                <p>Implementado pelo script <code>b.4_Equalização_nas_Cores.cpp</code>.</p>
                <ul>
                    <li><strong>Fluxo (em loop):</strong>
                        <ol>
                            <li>Capturar quadro colorido da webcam.</li>
                            <li>Dividir a imagem nos 3 canais de cor (B, G, R) usando <code>cv::split</code>.</li>
                            <li>Aplicar <code>cv::equalizeHist</code> separadamente em cada canal (B_eq, G_eq, R_eq).</li>
                            <li>Mesclar os canais equalizados (B_eq, G_eq, R_eq) de volta em uma imagem colorida usando <code>cv::merge</code>.</li>
                            <li>Exibir imagem colorida original e imagem colorida equalizada.</li>
                        </ol>
                    </li>
                </ul>
            </section>

            <section id="resultados-analises">
                <h2>4. Resultados e Análises</h2>

                <h3>4.1. Resultados do Experimento 1 (Estático)</h3>
                <p>Foram capturadas imagens dos integrantes do grupo. Os resultados mostram a imagem original em tons de cinza, a imagem equalizada e os histogramas antes e depois.</p>
                
                <div class="image-gallery">
                    <div>
                        <p><strong>Resultado (George)</strong></p>
                        <img src="histograma_george.png" alt="Histograma e Equalização de George">
                    </div>
                    <div>
                        <p><strong>Resultado (Paschoim)</strong></p>
                        <img src="histograma_paschoim.png" alt="Histograma e Equalização de Paschoim">
                    </div>
                    <div>
                        <p><strong>Resultado (Pompeu)</strong></p>
                        <img src="histograma_pompeu.png" alt="Histograma e Equalização de Pompeu">
                    </div>
                     <div>
                        <p><strong>Resultado (Nayara)</strong></p>
                        <img src="histograma_nayara.png" alt="Histograma e Equalização de Nayara">
                    </div>
                </div>

                <h4>Análise (Experimento 1)</h4>
                <p>Observa-se claramente em todos os resultados que os histogramas originais (antes) estavam concentrados em faixas estreitas de intensidade (indicando baixo contraste). Após a equalização, os "Histogramas (Depois)" mostram uma distribuição muito mais ampla e uniforme por toda a gama de intensidades (0-255).</p>
                <p>Visualmente, as "Imagens Equalizadas" apresentam um contraste significativamente maior. Detalhes em áreas de sombra (como cabelo ou fundo) e áreas claras (como reflexos na pele) tornaram-se muito mais nítidos e discerníveis, validando a eficácia do método.</p>

                <h3>4.2. Resultados do Experimento 3 (Binarização)</h3>
                <p>O experimento 2 (webcam cinza) foi uma etapa intermediária para o experimento 3, que compara a binarização.</p>
                <div class="image-gallery">
                    <div>
                        <p><strong>Binarização (George)</strong></p>
                        <img src="binarização_george.png" alt="Comparação de Binarização George">
                    </div>
                    <div>
                        <p><strong>Binarização (Pompeu)</strong></p>
                        <img src="binarização_pompeu.png" alt="Comparação de Binarização Pompeu">
                    </div>
                    <div>
                        <p><strong>Binarização (Objetos)</strong></p>
                        <img src="binarização_objetos.png" alt="Comparação de Binarização Objetos">
                    </div>
                </div>
                
                <h4>Análise (Experimento 3)</h4>
                <p>A análise comparativa entre "Binaria (Sem EQ)" e "Binaria (Com EQ)" demonstra a importância da equalização como passo de pré-processamento. Nas imagens sem equalização, variações de iluminação no ambiente (sombras no rosto, brilho excessivo) causam falhas na binarização, resultando em "buracos" ou ruído.</p>
                <p>Ao aplicar a equalização (como visto em "Binaria (Com EQ)"), o contraste é normalizado antes do limiar. Isso torna o processo de binarização muito mais robusto e estável, capaz de segmentar o objeto de interesse (rosto, objetos) do fundo de maneira mais limpa, mesmo sob iluminação não ideal.</p>

                <h3>4.3. Resultados do Experimento 4 (Equalização em Cores)</h3>
                <p>A equalização foi aplicada separadamente em cada canal de cor (B, G, R) e depois os canais foram reunidos.</p>
                <div class="image-gallery">
                    <div>
                        <p><strong>Cor Equalizada (Pompeu)</strong></p>
                        <img src="equalizacao_cor_pompeu.png" alt="Equalização em Cor Pompeu">
                    </div>
                    <div>
                        <p><strong>Cor Equalizada (Paschoim)</strong></p>
                        <img src="equalizacao_cor_paschoim.png" alt="Equalização em Cor Paschoim">
                    </div>
                     <div>
                        <p><strong>Cor Equalizada (Objetos)</strong></p>
                        <img src="equalizacao_cor_objetos.png" alt="Equalização em Cor Objetos">
                    </div>
                </div>

                <h4>Análise (Experimento 4)</h4>
                <p>Este método aumenta o contraste local em cada canal de cor, o que realça texturas e detalhes. No entanto, o resultado visual pode ser indesejável. Como cada canal é equalizado independentemente, o balanço de cores original da imagem é perdido.</p>
                <p>Isso frequentemente leva a uma distorção de cor (color cast), onde a imagem final parece "lavada" ou com cores não naturais (como visto nos resultados, com tons de pele e objetos assumindo matizes exagerados). Para uma equalização de cor mais eficaz, seria necessário converter a imagem para um espaço de cor que separe intensidade de crominância (como HSV ou YCrCb) e equalizar apenas o canal de intensidade (V ou Y), preservando os canais de cor.</p>

            </section>

            <section id="conclusao">
                <h2>5. Conclusões e Comentários Finais</h2>
                <p>Este laboratório permitiu uma compreensão prática e aprofundada da técnica de equalização de histograma. Verificou-se que a equalização é uma ferramenta extremamente eficaz para o realce de contraste em imagens em tons de cinza, tanto estáticas quanto em vídeo.</p>
                <p>O aprendizado técnico mais significativo foi observar o impacto direto da equalização como um passo de pré-processamento para outras operações, como a binarização. A estabilização do contraste proporcionada pela equalização tornou a segmentação por limiar muito mais confiável e menos suscetível a variações de iluminação ambiente.</p>
                <p>Por fim, o experimento de equalização em cores demonstrou que a aplicação ingênua da técnica (canal a canal) pode ser prejudicial ao balanço de cores, ensinando a importância de escolher o espaço de cor adequado para cada operação de processamento de imagem.</p>
            </section>
        </main>
    </div>

</body>
</html>